webpackJsonp([14],{DbAe:function(e,t,a){(e.exports=a("bKW+")(!1)).push([e.i,"\n.app-container[data-v-bd8de06c] {\n  padding-left: 50px;\n}\n.app-container .title[data-v-bd8de06c] {\n    font-size: 30px;\n    color: #606266;\n}\n.app-container .btn-container[data-v-bd8de06c] {\n    padding-top: 30px;\n    text-align: center;\n}\n.app-container span.danger[data-v-bd8de06c] {\n    color: red;\n}\n.app-container .total[data-v-bd8de06c] {\n    margin: 5px 0;\n}\n.app-container .total span[data-v-bd8de06c] {\n      color: red;\n}\n",""])},"Q1v+":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=a("Edqs"),i=a.n(l),n=a("L9TO"),r=a("6DDL"),s={data:function(){return{statusEnum:r.a,listLoading:!1,current_page:1,max_page:0,page_size:20,total_count:null,daterange:[],clickId:"",validdaterange:[],form:{publisher:"",title:"",status:3,top:0,sort:""},list:[{adNo:"222",title:"广告1",publisher:"唐先森",createTime:"20180715",approver:"哈哈先森",approveTime:"20180908",sort:3,validTime:"20180706",status:3,id:100,images:[{goodPath:"http://p1.xiaoshidi.net/2018/08/17055418451694.jpg"}]}],selectedLists:[],dialogFormVisible:!1,dialogForm:{agree:0,remark:""}}},computed:{listQuery:function(){return i()({},this.form,{startApproveDate:this.daterange[0]||null,endApproveDate:this.daterange[1]||null,startValidDate:this.validdaterange[0]||null,endValidDate:this.validdaterange[1]||null,pageIndex:this.current_page,pageSize:this.page_size})}},filters:{statusFilter:function(e){return r.a.status[e]&&r.a.status[e].msg||""},sortFilter:function(e){return r.a.sort[e]&&r.a.sort[e].msg||""}},created:function(){this.fetchData()},methods:{audit:function(e){this.clickId=e,this.dialogFormVisible=!0},handleAgreeConfirm:function(){var e=this;this.dialogFormVisible=!1;var t=[];this.selectedLists.map(function(e){t.push(e.id)}),Object(n.c)({adId:t.length?t.join(","):this.clickId,status:this.dialogForm.agree,remark:this.dialogForm.remark}).then(function(t){200==t.code?(e.$message({message:"审核成功",type:"success"}),e.fetchData()):e.$message({message:t.msg,type:"error"})})},fetchData:function(){var e=this;this.listLoading=!0,Object(n.h)(this.listQuery).then(function(t){e.listLoading=!1,200==t.code&&(e.total_count=t.data.total_count,e.current_page=t.data.current_page,e.max_page=t.data.max_page,e.list=t.data.data)}).catch(function(e){console.error("",e)})},currentPageChange:function(e){this.current_page=e,this.fetchData()},onSubmit:function(){this.fetchData()},goDetail:function(e){this.$router.push({name:"ads-detail",params:{id:e}})},toggleSelection:function(e){var t=this;e&&e.forEach(function(e){t.$refs.adsTable.toggleRowSelection(e)})},handleSelectionChange:function(e){this.selectedLists=e}},components:{TitleLine:a("xE3b").a}},o={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("title-line",{attrs:{txt:"广告审核"}}),e._v(" "),a("div",{staticStyle:{padding:"20px",background:"#F2F6FC"}},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.form}},[a("el-form-item",{attrs:{label:"广告标题"}},[a("el-input",{attrs:{placeholder:"请输入广告标题"},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"发布人"}},[a("el-input",{attrs:{placeholder:"请输入发布人姓名"},model:{value:e.form.publisher,callback:function(t){e.$set(e.form,"publisher",t)},expression:"form.publisher"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"发布日期"}},[a("el-date-picker",{attrs:{type:"daterange","value-format":"yyyy-MM-dd","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.daterange,callback:function(t){e.daterange=t},expression:"daterange"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"广告位"}},[a("el-select",{attrs:{placeholder:"请选择",clearable:""},model:{value:e.form.sort,callback:function(t){e.$set(e.form,"sort",t)},expression:"form.sort"}},[a("el-option",{attrs:{label:"首页第一广告位",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"首页第二广告位",value:"2"}}),e._v(" "),a("el-option",{attrs:{label:"首页第三广告位",value:"3"}}),e._v(" "),a("el-option",{attrs:{label:"资讯页随机广告",value:"99"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"有效期"}},[a("el-date-picker",{attrs:{type:"validdaterange","value-format":"yyyy-MM-dd","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.validdaterange,callback:function(t){e.validdaterange=t},expression:"validdaterange"}})],1),e._v(" "),a("el-row",{staticStyle:{height:"40px"}},[a("el-form-item",[a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["audit-ads-search"],expression:"['audit-ads-search']"}],attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("查询")]),e._v(" "),a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["audit-ads-batchAudit"],expression:"['audit-ads-batchAudit']"}],staticClass:"stick-item",attrs:{type:"danger",disabled:!e.selectedLists.length},nativeOn:{click:function(t){e.audit(t)}}},[e._v("批量审核")])],1)],1)],1)],1),e._v(" "),a("div",{staticClass:"total"},[e._v("广告总数：共"),a("span",[e._v(e._s(e.list.length))]),e._v("条")]),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],ref:"adsTable",staticStyle:{width:"100%"},attrs:{data:e.list,border:"",fit:"","highlight-current-row":""},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"35"}}),e._v(" "),a("el-table-column",{staticClass:"table-item",attrs:{align:"center",label:"广告编号"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.adNo))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"广告标题"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.title))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"发布人"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"link-type"},[e._v(e._s(t.row.publisher))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"发布时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.createTime?t.row.createTime:""))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"审核人"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"link-type"},[e._v(e._s(t.row.approver))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"审核时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.approveTime?t.row.approveTime:""))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"广告位"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{class:e.statusEnum.sort[t.row.sort].color},[e._v(e._s(e._f("sortFilter")(t.row.sort)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"有效期"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.validTime?t.row.validTime:""))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"广告状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{class:e.statusEnum.status[t.row.status].color},[e._v(e._s(e._f("statusFilter")(t.row.status)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center","class-name":"small-padding fixed-width",label:"操作",width:"340"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["audit-ads-detail"],expression:"['audit-ads-detail']"}],attrs:{size:"mini",type:"success",plain:""},on:{click:function(a){e.goDetail(t.row.id)}}},[e._v("\r\n            查看详情\r\n          ")]),e._v(" "),3==t.row.status?a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["audit-ads-audit"],expression:"['audit-ads-audit']"}],attrs:{size:"mini",type:"danger"},on:{click:function(a){e.audit(t.row.id)}}},[e._v("\r\n            审核\r\n          ")]):e._e()]}}])})],1),e._v(" "),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{background:!0,"current-page":e.current_page,"page-size":e.page_size,layout:"total, prev, pager, next, jumper",total:e.total_count},on:{"current-change":e.currentPageChange}})],1),e._v(" "),a("el-dialog",{attrs:{width:"30%",title:e.selectedLists.length?"批量审核":"广告审核",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("div",{staticStyle:{color:"red","margin-left":"50px"}},[e._v("已选择"+e._s(e.selectedLists.length||"1")+"个广告")]),e._v(" "),a("el-form",{attrs:{model:e.dialogForm}},[a("el-form-item",{attrs:{label:"审核意见","label-width":"120px"}},[a("el-radio",{attrs:{label:1},model:{value:e.dialogForm.agree,callback:function(t){e.$set(e.dialogForm,"agree",t)},expression:"dialogForm.agree"}},[e._v("同意")]),e._v(" "),a("el-radio",{attrs:{label:4},model:{value:e.dialogForm.agree,callback:function(t){e.$set(e.dialogForm,"agree",t)},expression:"dialogForm.agree"}},[e._v("不同意")])],1),e._v(" "),a("el-form-item",{attrs:{label:"备注","label-width":"120px"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.dialogForm.remark,callback:function(t){e.$set(e.dialogForm,"remark",t)},expression:"dialogForm.remark"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.handleAgreeConfirm}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var c=a("D8HT")(s,o,!1,function(e){a("ucE2")},"data-v-bd8de06c",null);t.default=c.exports},ucE2:function(e,t,a){var l=a("DbAe");"string"==typeof l&&(l=[[e.i,l,""]]),l.locals&&(e.exports=l.locals);a("6imX")("5e1188ba",l,!0)}});