webpackJsonp([15],{BcDe:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("aA9S"),l=a.n(n),r=a("0fmI"),o=a("fJIP"),s={data:function(){return l()({},o.a,{list:[],listLoading:!0,current_page:1,max_page:0,page_size:20,startDaterange:[],endDaterange:[],total_count:null,priceCount:null,form:{}})},computed:{listQuery:function(){return l()({},this.form,{sstartDate:this.startDaterange[0]?this.startDaterange[0]+" 0:0:0":null,sendDate:this.startDaterange[1]?this.startDaterange[1]+" 23:59:59":null,estartDate:this.endDaterange[0]?this.endDaterange[0]+" 0:0:0":null,eendDate:this.endDaterange[1]?this.endDaterange[1]+" 23:59:59":null,pageIndex:this.current_page,pageSize:this.page_size})}},created:function(){this.fetchData()},methods:{fetchData:function(){var e=this;this.listLoading=!0,Object(r.e)(this.listQuery).then(function(t){e.list=t.data.data,e.priceCount=t.data.priceCount,e.total_count=t.data.total_count,e.current_page=t.data.current_page,e.max_page=t.data.max_page,e.listLoading=!1})},onSubmit:function(){this.fetchData()},check:function(e,t){this.$router.push({name:"travel-order-check",params:{id:t.groupOrderId}})},force:function(e,t){var a=this;this.$confirm("确定强制成团?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(r.b)(t.groupOrderId).then(function(e){a.$message({type:"success",message:"成团成功!"}),a.fetchData()})}).catch(function(){})},refund:function(e,t){var a=this;this.$confirm("是否对该团全部订单进行退款?","组团失败",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(r.c)(t.groupOrderId).then(function(e){a.$message({type:"success",message:"退款成功!"}),a.fetchData()})}).catch(function(){})},currentPageChange:function(e){this.current_page=e,this.fetchData()}},components:{TitleLine:a("xE3b").a}},i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("title-line",{attrs:{txt:"订单列表"}}),e._v(" "),a("div",{staticStyle:{padding:"30px",background:"#F2F6FC","margin-bottom":"30px"}},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.form}},[a("el-form-item",{attrs:{label:"商品名称"}},[a("el-input",{attrs:{placeholder:"请输入商品名称"},model:{value:e.form.goodsName,callback:function(t){e.$set(e.form,"goodsName",t)},expression:"form.goodsName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"最低成团人数"}},[a("el-select",{staticClass:"small-select",attrs:{placeholder:""},model:{value:e.form.peopleMinRule,callback:function(t){e.$set(e.form,"peopleMinRule",t)},expression:"form.peopleMinRule"}},[a("el-option",{attrs:{label:">",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"=",value:"0"}}),e._v(" "),a("el-option",{attrs:{label:"<",value:"-1"}})],1),e._v(" "),a("el-input-number",{attrs:{min:1,max:100,label:"最低成团人数"},model:{value:e.form.peopleMinNum,callback:function(t){e.$set(e.form,"peopleMinNum",t)},expression:"form.peopleMinNum"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"成团人数上限"}},[a("el-select",{staticClass:"small-select",attrs:{placeholder:""},model:{value:e.form.peopleMaxRule,callback:function(t){e.$set(e.form,"peopleMaxRule",t)},expression:"form.peopleMaxRule"}},[a("el-option",{attrs:{label:">",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"=",value:"0"}}),e._v(" "),a("el-option",{attrs:{label:"<",value:"-1"}})],1),e._v(" "),a("el-input-number",{attrs:{min:1,max:100,label:"成团人数上限"},model:{value:e.form.peopleMaxNum,callback:function(t){e.$set(e.form,"peopleMaxNum",t)},expression:"form.peopleMaxNum"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"订单状态"}},[a("el-select",{attrs:{clearable:"",placeholder:"全部"},model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}},[a("el-option",{attrs:{label:"报名中",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"组团失败",value:"2"}}),e._v(" "),a("el-option",{attrs:{label:"已成团",value:"3"}}),e._v(" "),a("el-option",{attrs:{label:"已结束",value:"4"}}),e._v(" "),a("el-option",{attrs:{label:"强制成团",value:"5"}}),e._v(" "),a("el-option",{attrs:{label:"退款",value:"6"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"开始时间"}},[a("el-date-picker",{attrs:{type:"daterange","value-format":"yyyy-MM-dd","range-separator":"-","start-placeholder":"起","end-placeholder":"止"},model:{value:e.startDaterange,callback:function(t){e.startDaterange=t},expression:"startDaterange"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"结束时间"}},[a("el-date-picker",{attrs:{type:"daterange","value-format":"yyyy-MM-dd","range-separator":"-","start-placeholder":"起","end-placeholder":"止"},model:{value:e.endDaterange,callback:function(t){e.endDaterange=t},expression:"endDaterange"}})],1),e._v(" "),a("el-row",[a("el-form-item",[a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["travel-order-list-search"],expression:"['travel-order-list-search']"}],attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("查询")])],1)],1)],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],attrs:{stripe:!0,data:e.list,"element-loading-text":"Loading",border:"",fit:"","highlight-current-row":""}},[a("el-table-column",{attrs:{align:"center",label:"商品编号"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\r\n                "+e._s(t.row.goodsNo)+"\r\n            ")]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"商品名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\r\n                "+e._s(t.row.goodsName)+"\r\n            ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"商品分类",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:e.type[t.row.goodsType].color}},[e._v(e._s(e.type[t.row.goodsType].msg))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"开始时间",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\r\n                "+e._s(new Date(t.row.goodsUpDate).Format("yyyy-MM-dd HH:mm:ss"))+"\r\n            ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"结束时间",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\r\n                "+e._s(new Date(t.row.goodsCloseDate).Format("yyyy-MM-dd HH:mm:ss"))+"\r\n            ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"最低成团人数",width:"110",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\r\n                "+e._s(t.row.peopleMinNum)+"\r\n            ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"成团人数上限",width:"110",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\r\n                "+e._s(t.row.peopleMaxNum)+"\r\n            ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"已报人数",width:"110",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\r\n                "+e._s(t.row.enrollNum)+"\r\n            ")]}}])}),e._v(" "),a("el-table-column",{attrs:{"class-name":"status-col",label:"订单状态",width:"110",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:e.groupStatus[t.row.status].color}},[e._v(e._s(e.groupStatus[t.row.status].msg))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"270",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["travel-order-list-detail"],expression:"['travel-order-list-detail']"}],attrs:{size:"mini",type:"success"},on:{click:function(a){e.check(t.$index,t.row)}}},[e._v("查看详情")]),e._v(" "),a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["travel-order-list-refund"],expression:"['travel-order-list-refund']"}],attrs:{size:"mini",type:"primary"},on:{click:function(a){e.force(t.$index,t.row)}}},[e._v("强制成团")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){e.refund(t.$index,t.row)}}},[e._v("退款")])]}}])})],1),e._v(" "),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{background:!0,"current-page":e.current_page,"page-size":e.page_size,layout:"total, prev, pager, next, jumper",total:e.total_count},on:{"current-change":e.currentPageChange}})],1)],1)},staticRenderFns:[]};var c=a("vSla")(s,i,!1,function(e){a("sJCh")},"data-v-d0ccea34",null);t.default=c.exports},ZDrV:function(e,t,a){(e.exports=a("BkJT")(!1)).push([e.i,"\n.app-container .form[data-v-d0ccea34] {\n  margin-bottom: 50px;\n}\n.app-container .red[data-v-d0ccea34] {\n  color: #F56C6C;\n}\n.app-container .block[data-v-d0ccea34] {\n  margin: 50px 0 30px;\n  text-align: center;\n}\n.app-container .title[data-v-d0ccea34] {\n  font-size: 20px;\n  color: #606266;\n  margin-bottom: -5px;\n}\n.app-container .small-select[data-v-d0ccea34] {\n  width: 60px;\n}\n",""])},sJCh:function(e,t,a){var n=a("ZDrV");"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);a("8bSs")("a7ee1d14",n,!0)}});