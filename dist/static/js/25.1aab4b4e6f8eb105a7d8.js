webpackJsonp([25],{G2Q0:function(t,e,a){var r=a("cgX9");"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);a("6imX")("22861b75",r,!0)},cgX9:function(t,e,a){(t.exports=a("bKW+")(!1)).push([t.i,"\n.app-container[data-v-5d67432d] {\n  padding-left: 50px;\n}\n.app-container .title[data-v-5d67432d] {\n    font-size: 30px;\n    color: #606266;\n}\n.app-container .form[data-v-5d67432d] {\n    margin-top: 30px;\n    padding: 30px;\n    padding-bottom: 5px;\n    background: #F2F6FC;\n}\n.app-container .form .btn[data-v-5d67432d] {\n      margin-top: 30px;\n}\n",""])},uXXL:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a("Edqs"),i=a.n(r),s=a("FWz8"),n=a("TJdw"),o=a("tyyt"),l={data:function(){return i()({},o.a,{form:{status:null,visaPath:null,detatilId:null},form2:{},rules:{visaPath:[{required:!0,message:"请上传电子签证",trigger:"change"}],status:[{required:!0,message:"请选择签证状态",trigger:"change"}]},daterange:[],info:[],data:[],statusNum:null})},computed:{listQuery:function(){return i()({},this.form,{startTime:this.daterange[0],endTime:this.daterange[1],informTypeInfo:this.info.indexOf("短信通知")>-1?1:0,informTypeEmail:this.info.indexOf("邮件通知")>-1?1:0,orderId:this.$route.params.id})}},created:function(){this.fetchData()},methods:{fetchData:function(){var t=this;Object(s.a)(this.$route.params.id).then(function(e){var a=e.data;t.form.detatilId=e.data.orderDetail[0].id,t.statusNum=e.data.status,t.data=[{key:"订单编号",value:a.orderNum,type:"string"},{key:"订单总额",value:a.payMoney/100,type:"string"},{key:"真实姓名",value:a.orderDetail[0].name,type:"string"},{key:"护照号",value:a.orderDetail[0].passportNo,type:"string"},{key:"手机号码",value:a.orderDetail[0].mobile,type:"string"},{key:"Email",value:a.linkEmail,type:"string"},{key:"支付单号",value:a.payNum,type:"string"},{key:"付款时间",value:a.payTime,type:"dateTime"},{key:"支付方式",value:t.payTypes[a.payType].msg,type:"string"}]})},onSubmit:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return console.log("error submit!!"),!1;e.update(e.listQuery)})},imgUploaded:function(t,e){this.form.visaPath=t.data},imgRemove:function(t,e){this.form.visaPath=null},update:function(t){var e=this;Object(s.c)(t).then(function(t){e.$alert("更新成功","提示",{confirmButtonText:"确定",callback:function(t){e.$router.back()}})})},sended:function(){var t=this;this.form2.status?Object(s.c)({status:this.form2.status,orderId:this.$route.params.id,detatilId:this.form.detatilId}).then(function(e){t.$alert("更新成功","提示",{confirmButtonText:"确定",callback:function(e){t.$router.back()}})}):this.$message({message:"请选择状态",type:"warning"})}},components:{PortraitTable:n.a}},u={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("p",{staticClass:"title"},[t._v("设置签证状态")]),t._v(" "),a("hr"),t._v(" "),a("portrait-table",{attrs:{data:t.data,"key-width":80}}),t._v(" "),"办理中"!=t.status[t.statusNum].msg?a("el-form",{ref:"ruleForm",staticClass:"form",attrs:{model:t.form,rules:t.rules,size:"mini"}},[a("el-form-item",{attrs:{label:"签证状态",prop:"status"}},[a("el-radio-group",{model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}},[a("el-radio",{attrs:{label:"40"}},[t._v("已签发")]),t._v(" "),a("el-radio",{attrs:{label:"41"}},[t._v("拒签")])],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"通知方式"}},[a("el-checkbox-group",{model:{value:t.info,callback:function(e){t.info=e},expression:"info"}},[a("el-checkbox",{attrs:{label:"短信通知"}}),t._v(" "),a("el-checkbox",{attrs:{label:"邮件通知"}})],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"时间"}},[a("el-date-picker",{attrs:{type:"daterange","value-format":"yyyy-MM-dd","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.daterange,callback:function(e){t.daterange=e},expression:"daterange"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"上传电子签证",prop:"visaPath"}},[a("el-upload",{staticClass:"upload-demo",attrs:{"list-type":"picture",action:"/api/image/uploadfile",name:"file",limit:1,"on-success":t.imgUploaded,"on-remove":t.imgRemove}},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:!t.form.visaPath,expression:"!form.visaPath"}],attrs:{size:"small",type:"primary"}},[t._v("点击上传")]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!!t.form.visaPath,expression:"!!form.visaPath"}],staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("如需更换图片，请点击图片右上角删除后重新上传")])],1)],1),t._v(" "),a("el-form-item",{staticClass:"btn",attrs:{size:"large"}},[a("el-button",{attrs:{type:"info"},nativeOn:{click:function(e){t.$router.back()}}},[t._v("取消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.onSubmit("ruleForm")}}},[t._v("提交")])],1)],1):a("el-form",{staticClass:"form",attrs:{size:"mini"}},[a("el-form-item",{attrs:{label:"签证状态",prop:"status"}},[a("el-radio-group",{model:{value:t.form2.status,callback:function(e){t.$set(t.form2,"status",e)},expression:"form2.status"}},[a("el-radio",{attrs:{label:"30"}},[t._v("已送签")])],1)],1),t._v(" "),a("el-form-item",{staticClass:"btn",attrs:{size:"large"}},[a("el-button",{attrs:{type:"info"},nativeOn:{click:function(e){t.$router.back()}}},[t._v("取消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.sended}},[t._v("提交")])],1)],1)],1)},staticRenderFns:[]};var d=a("D8HT")(l,u,!1,function(t){a("G2Q0")},"data-v-5d67432d",null);e.default=d.exports}});