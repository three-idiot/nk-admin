webpackJsonp([27],{FsqT:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("aA9S"),s=a.n(i),n=a("NLJq"),l={data:function(){return{total:0,list:null,listLoading:!0,pagesStatus:{total_count:0},goodStatus:{0:"仓库中",1:"出售中",2:"违规下架"},listQuery:{auditStatus:0,page:1,size:10,title:null,startTime:null,endTime:null,status:null}}},computed:{},filters:{statusFilter:function(t){return{1:"success",0:"gray",2:"danger"}[t]}},created:function(){this.fetchData(this.listQuery)},methods:{fetchData:function(t){var e=this;this.listLoading=!0,Object(n.c)(t).then(function(t){e.list=t.data.data,console.log(t.data),e.pagesStatus.total_count=t.data.total_count,e.listLoading=!1})},handleSizeChange:function(t){this.listQuery.size=t,this.fetchData(this.listQuery)},handleCurrentChange:function(t){this.listQuery.page=t,this.fetchData(this.listQuery)},handleFilter:function(){console.log(this.listQuery);var t=s()({},this.listQuery);t.startTime&&(t.timeType=0),this.fetchData(t)},goDetail:function(t){window.location.href="#/visa/detail?id="+t},goRatio:function(t){window.location.href="#/visa/ratio?id="+t},goUndercarriage:function(t){window.location.href="#/visa/undercarriage?id="+t},shelf:function(t){Object(n.e)({goodId:t}).then(function(t){console.log(t),200==t.code&&(alert("上架成功"),window.location.reload())})}}},r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"filter-container",staticStyle:{"margin-bottom":"30px"}},[a("span",[t._v("商品名称：")]),t._v(" "),a("el-input",{staticStyle:{width:"200px"},model:{value:t.listQuery.title,callback:function(e){t.$set(t.listQuery,"title",e)},expression:"listQuery.title"}}),t._v(" "),a("span",{staticClass:"demonstration"},[t._v("发布时间：")]),t._v(" "),a("el-date-picker",{attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:t.listQuery.startTime,callback:function(e){t.$set(t.listQuery,"startTime",e)},expression:"listQuery.startTime"}}),t._v("\n    -\n      "),a("el-date-picker",{attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:t.listQuery.endTime,callback:function(e){t.$set(t.listQuery,"endTime",e)},expression:"listQuery.endTime"}}),t._v(" "),a("span",[t._v("商品状态：")]),t._v(" "),a("el-select",{staticClass:"filter-item",staticStyle:{width:"90px"},attrs:{clearable:"",placeholder:"请选择"},model:{value:t.listQuery.status,callback:function(e){t.$set(t.listQuery,"status",e)},expression:"listQuery.status"}},t._l(t.goodStatus,function(t,e){return a("el-option",{key:e,attrs:{label:t,value:e}})})),t._v(" "),a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["visa-list-search"],expression:"['visa-list-search']"}],staticClass:"filter-item",staticStyle:{"margin-left":"20px"},attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.handleFilter}},[t._v("查询")])],1),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],staticStyle:{width:"100%","min-height":"1000px"},attrs:{data:t.list,border:"",fit:"","highlight-current-row":""}},[a("el-table-column",{staticClass:"table-item",attrs:{align:"center",label:"序号"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.id))])]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"商品名称"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.title))])]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"有效期(天)"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"link-type"},[t._v(t._s(e.row.unitDay?e.row.unitDay:"长期"))])]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"签证价格(惠)"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.lowVisaPrice/100)+"元")])]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"发布时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(new Date(e.row.ctime).Format("yyyy-MM-dd HH:mm:ss")))])]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"分成比例"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"link-type"},[a("p",[t._v("旅行社分成 :"+t._s(e.row.travelRatio/100)+"%")]),t._v(" "),a("p",[t._v("渠道分成："+t._s(e.row.channelRatio/100)+"%")]),t._v(" "),a("p",[t._v("平台分成："+t._s(e.row.terraceRatio/100)+"%")])])]}}])}),t._v(" "),a("el-table-column",{attrs:{"class-name":"status-col",label:"商品状态",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tag",{attrs:{type:t._f("statusFilter")(e.row.status)}},[t._v("\n          "+t._s(t.goodStatus[e.row.status])+"\n        ")])]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center","class-name":"small-padding fixed-width",label:"操作",width:"340"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["visa-list-detail"],expression:"['visa-list-detail']"}],attrs:{size:"mini",type:"success",plain:""},on:{click:function(a){t.goDetail(e.row.id)}}},[t._v("\n          查看商品\n        ")]),t._v(" "),a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["visa-list-editDivide"],expression:"['visa-list-editDivide']"}],attrs:{type:"primary",size:"mini"},on:{click:function(a){t.goRatio(e.row.id)}}},[t._v("\n          修改分成\n        ")]),t._v(" "),2==e.row.status?a("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(a){t.shelf(e.row.id)}}},[t._v("审核上架")]):t._e(),t._v(" "),2!=e.row.status?a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["visa-list-offline"],expression:"['visa-list-offline']"}],attrs:{size:"mini",type:"danger"},on:{click:function(a){t.goUndercarriage(e.row.id)}}},[t._v("\n          违规下架\n        ")]):t._e()]}}])})],1),t._v(" "),a("div",{staticClass:"pagination-container",staticStyle:{"margin-top":"30px"}},[a("el-pagination",{attrs:{background:"","current-page":t.listQuery.page,"page-sizes":[4,10,20,30,50],"page-size":t.listQuery.size,layout:"total, sizes, prev, pager, next, jumper",total:t.pagesStatus.total_count},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1)},staticRenderFns:[]};var o=a("vSla")(l,r,!1,function(t){a("Ocqw")},"data-v-43910a83",null);e.default=o.exports},Hfd2:function(t,e,a){(t.exports=a("BkJT")(!1)).push([t.i,"\n.app-container[data-v-43910a83] {\n  padding-left: 50px;\n}\n",""])},Ocqw:function(t,e,a){var i=a("Hfd2");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a("8bSs")("382c211c",i,!0)}});