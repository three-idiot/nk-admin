webpackJsonp([30],{"0osn":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("Edqs"),l=n.n(a),o=n("o1Jv"),r=n("ejxQ"),i={data:function(){return l()({},r.a,{province:null,city:null,county:null,street:null,list:null,listLoading:!0,max_page:0,daterange:[],total_count:0,priceCount:null,form:{province:null,city:null,county:null,street:null,roleId:null,status:null,beginExpireTime:null,endExpireTime:null,contactsName:null,contactsPhone:null,pageIndex:1,pageSize:20}})},computed:{listQuery:function(){var e=void 0,t=void 0;return this.daterange?(e=this.daterange[0]?new Date(this.daterange[0]).Format("yyyy-MM-dd HH:mm:ss"):null,t=this.daterange[1]?new Date(this.daterange[1]).Format("yyyy-MM-dd HH:mm:ss"):null):(e=null,t=null),l()({},this.form,{beginExpireTime:e,endExpireTime:t})}},created:function(){this.fetchData(),this.fetchAddressData()},methods:{fetchAddressData:function(){var e=this;Object(o.d)({id:0}).then(function(t){e.province=t.data})},getNextLevel:function(e,t){var n=this;Object(o.d)({id:t}).then(function(t){n[e]=t.data})},opt:function(e,t){Object(o.f)({id:e,optType:t}).then(function(e){console.log(e),200==e.code&&(alert("改变成功"),window.location.reload())})},goDetail:function(e){this.$router.push({name:"agent-detail",query:{id:e}})},jumpAdd:function(){this.$router.push({name:"agent-add"})},goEdit:function(e){this.$router.push({name:"agent-edit",query:{id:e}})},fetchData:function(){var e=this;this.listLoading=!0,console.log("调试",this.listQuery),Object(o.c)(this.listQuery).then(function(t){console.log(t.data),e.list=t.data.data,e.listLoading=!1,console.log(e.list),e.total_count=t.data.total_count})},onSubmit:function(){this.fetchData()},check:function(e,t){this.$router.push({name:"order-check",params:{id:t.id}})},edit:function(e,t){this.$router.push({name:"order-edit",params:{id:t.id}})},currentPageChange:function(e){this.form.pageIndex=e,this.fetchData()}}},s={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-container"},[n("p",{staticClass:"title"},[e._v("\n        代理商列表\n        "),n("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["agent-list-add"],expression:"['agent-list-add']"}],staticClass:"add-agent-button",attrs:{type:"danger"},on:{click:e.jumpAdd}},[e._v("新增代理商+")])],1),e._v(" "),n("hr"),e._v(" "),n("div",{staticStyle:{padding:"30px",background:"#F2F6FC"}},[n("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.form}},[n("el-form-item",{attrs:{label:"地区："}},[n("el-select",{staticClass:"address",attrs:{placeholder:"请选择省",clearable:""},model:{value:e.form.province,callback:function(t){e.$set(e.form,"province",t)},expression:"form.province"}},e._l(e.province,function(t){return n("el-option",{key:t.id,attrs:{label:t.name,value:t.id},nativeOn:{click:function(n){e.getNextLevel("city",t.id)}}})}))],1),e._v(" "),n("el-form-item",{attrs:{label:""}},[n("el-select",{attrs:{placeholder:"请选择市",clearable:""},model:{value:e.form.city,callback:function(t){e.$set(e.form,"city",t)},expression:"form.city"}},e._l(e.city,function(t){return n("el-option",{key:t.id,attrs:{label:t.name,value:t.id},nativeOn:{click:function(n){e.getNextLevel("county",t.id)}}})}))],1),e._v(" "),n("el-form-item",{attrs:{label:""}},[n("el-select",{attrs:{placeholder:"请选择区县",clearable:""},model:{value:e.form.county,callback:function(t){e.$set(e.form,"county",t)},expression:"form.county"}},e._l(e.county,function(t){return n("el-option",{key:t.id,attrs:{label:t.name,value:t.id},nativeOn:{click:function(n){e.getNextLevel("street",t.id)}}})}))],1),e._v(" "),n("el-form-item",{attrs:{label:""}},[n("el-select",{attrs:{placeholder:"请选择街道",clearable:""},model:{value:e.form.street,callback:function(t){e.$set(e.form,"street",t)},expression:"form.street"}},e._l(e.street,function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),n("el-form-item",{attrs:{label:"代理商角色："}},[n("el-select",{attrs:{placeholder:"请选择街道",clearable:""},model:{value:e.form.roleId,callback:function(t){e.$set(e.form,"roleId",t)},expression:"form.roleId"}},e._l(e.roleId,function(e,t){return n("el-option",{key:t,attrs:{label:e,value:t}})}))],1),e._v(" "),n("div"),e._v(" "),n("el-form-item",{attrs:{label:"代理商状态："}},[n("el-select",{attrs:{placeholder:"请选择",clearable:""},model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}},e._l(e.status,function(e,t){return n("el-option",{key:t,attrs:{label:e.msg,value:t}})}))],1),e._v(" "),n("el-form-item",{attrs:{label:"有效期："}},[n("el-date-picker",{attrs:{type:"datetimerange","start-placeholder":"开始日期","end-placeholder":"结束日期","default-time":["12:00:00"]},model:{value:e.daterange,callback:function(t){e.daterange=t},expression:"daterange"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"联系人："}},[n("el-input",{attrs:{placeholder:"请输入联系人姓名"},model:{value:e.form.contactsName,callback:function(t){e.$set(e.form,"contactsName",t)},expression:"form.contactsName"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"电话："}},[n("el-input",{attrs:{placeholder:"请输入联系人电话"},model:{value:e.form.contactsPhone,callback:function(t){e.$set(e.form,"contactsPhone",t)},expression:"form.contactsPhone"}})],1),e._v(" "),n("el-form-item",[n("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["agent-list-search"],expression:"['agent-list-search']"}],attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("搜索")])],1)],1)],1),e._v(" "),n("p",[e._v("代理商总数共 "),n("span",{staticClass:"red"},[e._v(e._s(e.total_count))]),e._v(" 条 ")]),e._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],attrs:{stripe:!0,data:e.list,"element-loading-text":"Loading",border:"",fit:"","highlight-current-row":""}},[n("el-table-column",{attrs:{align:"center",label:"代理商编号"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(t.row.agentNo)+"\n            ")]}}])}),e._v(" "),n("el-table-column",{attrs:{align:"center",label:"代理商角色"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(e.roleId[t.row.roleId])+"\n            ")]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"代理商名称",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(t.row.agentName))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"地区",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(t.row.province)+"\n            ")]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"联系人",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(t.row.contactsName)+"\n            ")]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"电话",width:"110",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(t.row.contactsPhone)+"\n            ")]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"地址",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(t.row.province)+"\n            ")]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"有效期",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(t.row.expireTime)+"\n            ")]}}])}),e._v(" "),n("el-table-column",{attrs:{"class-name":"status-col",label:"代理商状态",width:"110",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-tag",{attrs:{type:e.status[t.row.status].color}},[e._v(e._s(e.status[t.row.status].msg))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"操作",width:"340",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["agent-list-detail"],expression:"['agent-list-detail']"}],attrs:{size:"mini",type:"success",plain:""},on:{click:function(n){e.goDetail(t.row.id)}}},[e._v("\n                    查看详情\n                ")]),e._v(" "),n("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["agent-list-edit"],expression:"['agent-list-edit']"}],attrs:{type:"primary",size:"mini"},on:{click:function(n){e.goEdit(t.row.id)}}},[e._v("\n                    编辑\n                ")]),e._v(" "),1==t.row.status?n("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(n){e.opt(t.row.id,2)}}},[e._v("恢复")]):e._e(),e._v(" "),1!=t.row.status?n("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(n){e.opt(t.row.id,1)}}},[e._v("\n                    停用\n                ")]):e._e()]}}])})],1),e._v(" "),n("div",{staticClass:"block"},[n("el-pagination",{attrs:{background:!0,"current-page":e.form.pageIndex,"page-size":e.form.pageSize,layout:"total, prev, pager, next, jumper",total:e.total_count},on:{"current-change":e.currentPageChange}})],1)],1)},staticRenderFns:[]};var c=n("D8HT")(i,s,!1,function(e){n("ud0e")},"data-v-35f2e875",null);t.default=c.exports},rMOP:function(e,t,n){(e.exports=n("bKW+")(!1)).push([e.i,"\n.app-container .title[data-v-35f2e875] {\n  font-size: 30px;\n  color: #606266;\n  line-height: 40px;\n}\n.app-container .title .add-agent-button[data-v-35f2e875] {\n    font-size: 18px;\n    float: right;\n    margin-right: 40px;\n}\n.app-container .red[data-v-35f2e875] {\n  color: #F56C6C;\n}\n.app-container .block[data-v-35f2e875] {\n  margin: 50px 0 30px;\n  text-align: center;\n}\n",""])},ud0e:function(e,t,n){var a=n("rMOP");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);n("6imX")("738c9e1a",a,!0)}});