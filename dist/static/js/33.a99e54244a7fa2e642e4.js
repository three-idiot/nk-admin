webpackJsonp([33],{"2XC+":function(e,r,l){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var t=l("aA9S"),i=l.n(t),a=l("qsHl"),o=l("eFoC"),s=l("tyP1"),n={data:function(){var e=function(e,r,l){if(!/^[0-9]*$/.test(r))return l(new Error("必须是数字"));l()};return i()({},o.a,{editorSetting:{width:600,height:400},upType:null,travelGoodsDividePrices:[{agentType:1,userType:2,price:null},{agentType:2,userType:2,price:null},{agentType:3,userType:2,price:null},{agentType:4,userType:2,price:null},{agentType:1,userType:1,price:null},{agentType:2,userType:1,price:null},{agentType:3,userType:1,price:null},{agentType:4,userType:1,price:null}],upStatus:{"立即上架":2,"在库中":1,"固定时间上架":3},imageUrl:"",ruleForm:{name:null,outline:null,type:null,leaveTime:null,leaveAddress:null,lineDescribe:null,tripDescribe:null,costDescribe:null,closeDate:null,peopleMinNum:null,peopleMaxNum:null,realPrice:null,salePrice:null,childPrice:null,status:null,upTime:null,images:null,travelGoodsDividePrices:null},rules:{name:[{required:!0,trigger:"blur",message:"请输入商品名称"}],outline:[{required:!0,trigger:"blur",message:"请输入商品概要"}],type:[{required:!0,trigger:"change",message:"请选择商品分类"}],leaveTime:[{required:!0,trigger:"change",message:"请输入出发日期"}],leaveAddress:[{required:!0,trigger:"change",message:"请输入出发地点"}],lineDescribe:[{required:!0,trigger:"change",message:"请输入线路特色"}],tripDescribe:[{required:!0,trigger:"change",message:"请输入行程特色"}],costDescribe:[{required:!0,trigger:"change",message:"请输入费用与须知"}],peopleMinNum:[{required:!0,trigger:"change",message:"请输入最低成团人数"},{validator:e,trigger:"blur"}],peopleMaxNum:[{required:!0,trigger:"change",message:"请输入成团人数上限"},{validator:e,trigger:"blur"}],realPrice:[{required:!0,trigger:"blur",message:"请输入商品价格"},{validator:e,trigger:"blur"}],salePrice:[{required:!0,trigger:"blur",message:"请输入门市价格"},{validator:e,trigger:"blur"}],childPrice:[{required:!0,trigger:"blur",message:"请输入儿童价格"},{validator:e,trigger:"blur"}],images:[{required:!0,trigger:"change",message:"请至少添加一张图片"}],closeDate:[{required:!0,trigger:"change",message:"请输入报名截止时间"}]}})},created:function(){},components:{App:l("M93x").a,editor:s.a},methods:{handleAvatarSuccess:function(e,r){this.imageUrl=URL.createObjectURL(r.raw),console.log(r.response.data),this.ruleForm.goodsNum=r.response.data},beforeAvatarUpload:function(e){var r=e.size/1024/1024<2;return r||this.$message.error("上传头像图片大小不能超过 2MB!"),r},imgUploaded:function(e,r){"[object Array]"!=Object.prototype.toString.call(this.ruleForm.images)&&(this.ruleForm.images=[]);var l={goodPath:e.data,sort:this.ruleForm.images.length?this.ruleForm.images.length:0};this.ruleForm.images.push(l),console.log(this.ruleForm.images)},imgRemove:function(e,r){this.form.visaPath=null},submitForm:function(e){var r=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;if(console.log("submit!"),console.log(r.upType),console.log("测试",r.travelGoodsDividePrices),2==r.upType)r.ruleForm.status=2,r.ruleForm.upTime=(new Date).Format("yyyy-MM-dd HH:mm:ss");else if(1==r.upType)r.ruleForm.status=1,r.ruleForm.upTime=null;else if(r.ruleForm.status=1,!r.ruleForm.upTime)return void alert("请输入上架时间");console.log("调试2",r.ruleForm),r.ruleForm.travelGoodsDividePrices=r.travelGoodsDividePrices,Object(a.b)(r.ruleForm).then(function(e){console.log("掉借口了",e),200==e.code?(alert("新建成功"),window.location.reload()):alert(e.msg)})})},resetForm:function(e){this.$refs[e].resetFields()}}},u={render:function(){var e=this,r=e.$createElement,l=e._self._c||r;return l("div",{staticClass:"addVisa-form"},[l("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"130px"}},[l("el-form-item",{staticStyle:{width:"312px"},attrs:{label:"商品名称",prop:"name"}},[l("el-input",{model:{value:e.ruleForm.name,callback:function(r){e.$set(e.ruleForm,"name",r)},expression:"ruleForm.name"}})],1),e._v(" "),l("el-form-item",{staticStyle:{width:"312px"},attrs:{label:"商品概要",prop:"outline"}},[l("el-input",{model:{value:e.ruleForm.outline,callback:function(r){e.$set(e.ruleForm,"outline",r)},expression:"ruleForm.outline"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"商品分类",prop:"type"}},[l("el-select",{attrs:{placeholder:"请选择"},model:{value:e.ruleForm.type,callback:function(r){e.$set(e.ruleForm,"type",r)},expression:"ruleForm.type"}},e._l(e.type,function(e,r){return l("el-option",{key:r,attrs:{label:e,value:r}})}))],1),e._v(" "),l("el-form-item",{attrs:{label:"出发日期",prop:"leaveTime"}},[l("el-date-picker",{attrs:{type:"datetime",placeholder:"选择出发日期","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.ruleForm.leaveTime,callback:function(r){e.$set(e.ruleForm,"leaveTime",r)},expression:"ruleForm.leaveTime"}})],1),e._v(" "),l("el-form-item",{staticStyle:{width:"312px"},attrs:{label:"出发地点",prop:"leaveAddress"}},[l("el-input",{model:{value:e.ruleForm.leaveAddress,callback:function(r){e.$set(e.ruleForm,"leaveAddress",r)},expression:"ruleForm.leaveAddress"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"推荐商品",prop:"recommend"}},[l("el-radio-group",{model:{value:e.ruleForm.recommend,callback:function(r){e.$set(e.ruleForm,"recommend",r)},expression:"ruleForm.recommend"}},e._l(e.recommend,function(r,t){return l("el-radio",{key:t,attrs:{label:t,value:t}},[e._v(e._s(r))])}))],1),e._v(" "),l("el-form-item",{attrs:{label:"添加图片",prop:"images"}},[l("el-upload",{staticClass:"upload-demo",attrs:{"list-type":"picture",action:"/image/uploadfile",name:"file",limit:5,"on-success":e.imgUploaded,"on-remove":e.imgRemove}},[l("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")]),e._v(" "),l("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("如需更换图片，请点击图片右上角删除后重新上传")])],1)],1),e._v(" "),l("p",[e._v("商品描述：")]),e._v(" "),l("el-form-item",{attrs:{label:"线路特色",prop:"lineDescribe"}},[l("editor",{staticClass:"editor",attrs:{value:e.ruleForm.lineDescribe,setting:e.editorSetting},on:{input:function(r){return e.ruleForm.lineDescribe=r}}})],1),e._v(" "),l("el-form-item",{attrs:{label:"行程介绍",prop:"tripDescribe"}},[l("editor",{staticClass:"editor",attrs:{value:e.ruleForm.tripDescribe,setting:e.editorSetting},on:{input:function(r){return e.ruleForm.tripDescribe=r}}})],1),e._v(" "),l("el-form-item",{attrs:{label:"费用与须知",prop:"costDescribe"}},[l("editor",{staticClass:"editor",attrs:{value:e.ruleForm.costDescribe,setting:e.editorSetting},on:{input:function(r){return e.ruleForm.costDescribe=r}}})],1),e._v(" "),l("hr"),e._v(" "),l("el-form-item",{attrs:{label:"报名截止时间",prop:"closeDate"}},[l("el-date-picker",{attrs:{type:"datetime",placeholder:"选择报名截止时间","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.ruleForm.closeDate,callback:function(r){e.$set(e.ruleForm,"closeDate",r)},expression:"ruleForm.closeDate"}})],1),e._v(" "),l("el-form-item",{staticStyle:{width:"312px"},attrs:{label:"最低成团人数(人)",prop:"peopleMinNum"}},[l("el-input",{model:{value:e.ruleForm.peopleMinNum,callback:function(r){e.$set(e.ruleForm,"peopleMinNum",r)},expression:"ruleForm.peopleMinNum"}})],1),e._v(" "),l("el-form-item",{staticStyle:{width:"312px"},attrs:{label:"成团人数上限(人)",prop:"peopleMaxNum"}},[l("el-input",{model:{value:e.ruleForm.peopleMaxNum,callback:function(r){e.$set(e.ruleForm,"peopleMaxNum",r)},expression:"ruleForm.peopleMaxNum"}})],1),e._v(" "),l("hr"),e._v(" "),l("el-form-item",{staticStyle:{width:"312px"},attrs:{label:"设置商品价格(￥)",prop:"realPrice"}},[l("el-input",{model:{value:e.ruleForm.realPrice,callback:function(r){e.$set(e.ruleForm,"realPrice",r)},expression:"ruleForm.realPrice"}})],1),e._v(" "),l("el-form-item",{staticStyle:{width:"312px"},attrs:{label:"设置门市价格(￥)",prop:"salePrice"}},[l("el-input",{model:{value:e.ruleForm.salePrice,callback:function(r){e.$set(e.ruleForm,"salePrice",r)},expression:"ruleForm.salePrice"}})],1),e._v(" "),l("el-form-item",{staticStyle:{width:"312px"},attrs:{label:"设置儿童价格(￥)",prop:"childPrice"}},[l("el-input",{model:{value:e.ruleForm.childPrice,callback:function(r){e.$set(e.ruleForm,"childPrice",r)},expression:"ruleForm.childPrice"}})],1),e._v(" "),l("p",[e._v("设置商品分成：")]),e._v(" "),l("table",{staticClass:"divide-table"},[l("tr",[l("th",{staticClass:"tableTitle"},[e._v("分成设置(元)")]),e._v(" "),l("th",{staticClass:"tableTitle"},[e._v("省代")]),e._v(" "),l("th",{staticClass:"tableTitle"},[e._v("市县代")]),e._v(" "),l("th",{staticClass:"tableTitle"},[e._v("网点")]),e._v(" "),l("th",{staticClass:"tableTitle"},[e._v("第三方")])]),e._v(" "),l("tr",[l("td",{staticClass:"tableTitle"},[e._v("成人：")]),e._v(" "),l("td",[l("el-input",{attrs:{placeholder:"￥0.00"},model:{value:e.travelGoodsDividePrices[4].price,callback:function(r){e.$set(e.travelGoodsDividePrices[4],"price",e._n(r))},expression:"travelGoodsDividePrices[4].price"}})],1),e._v(" "),l("td",[l("el-input",{attrs:{placeholder:"￥0.00"},model:{value:e.travelGoodsDividePrices[5].price,callback:function(r){e.$set(e.travelGoodsDividePrices[5],"price",e._n(r))},expression:"travelGoodsDividePrices[5].price"}})],1),e._v(" "),l("td",[l("el-input",{attrs:{placeholder:"￥0.00"},model:{value:e.travelGoodsDividePrices[6].price,callback:function(r){e.$set(e.travelGoodsDividePrices[6],"price",e._n(r))},expression:"travelGoodsDividePrices[6].price"}})],1),e._v(" "),l("td",[l("el-input",{attrs:{placeholder:"￥0.00"},model:{value:e.travelGoodsDividePrices[7].price,callback:function(r){e.$set(e.travelGoodsDividePrices[7],"price",e._n(r))},expression:"travelGoodsDividePrices[7].price"}})],1)]),e._v(" "),l("tr",[l("td",{staticClass:"tableTitle"},[e._v("儿童：")]),e._v(" "),l("td",[l("el-input",{attrs:{placeholder:"￥0.00"},model:{value:e.travelGoodsDividePrices[0].price,callback:function(r){e.$set(e.travelGoodsDividePrices[0],"price",e._n(r))},expression:"travelGoodsDividePrices[0].price"}})],1),e._v(" "),l("td",[l("el-input",{attrs:{placeholder:"￥0.00"},model:{value:e.travelGoodsDividePrices[1].price,callback:function(r){e.$set(e.travelGoodsDividePrices[1],"price",e._n(r))},expression:"travelGoodsDividePrices[1].price"}})],1),e._v(" "),l("td",[l("el-input",{attrs:{placeholder:"￥0.00"},model:{value:e.travelGoodsDividePrices[2].price,callback:function(r){e.$set(e.travelGoodsDividePrices[2],"price",e._n(r))},expression:"travelGoodsDividePrices[2].price"}})],1),e._v(" "),l("td",[l("el-input",{attrs:{placeholder:"￥0.00"},model:{value:e.travelGoodsDividePrices[3].price,callback:function(r){e.$set(e.travelGoodsDividePrices[3],"price",e._n(r))},expression:"travelGoodsDividePrices[3].price"}})],1)])]),e._v(" "),l("hr"),e._v(" "),l("el-form-item",{attrs:{label:"设置上架日期"}},[l("el-radio-group",{model:{value:e.upType,callback:function(r){e.upType=r},expression:"upType"}},e._l(e.upStatus,function(r,t){return l("el-radio",{key:t,attrs:{label:r}},[e._v(e._s(t))])})),e._v(" "),3==e.upType?l("el-date-picker",{staticStyle:{"margin-left":"5px"},attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择日期"},model:{value:e.ruleForm.upTime,callback:function(r){e.$set(e.ruleForm,"upTime",r)},expression:"ruleForm.upTime"}}):e._e()],1),e._v(" "),l("el-form-item",[l("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["goods-add-publish"],expression:"['goods-add-publish']"}],attrs:{type:"primary"},on:{click:function(r){e.submitForm("ruleForm")}}},[e._v("提交")]),e._v(" "),l("el-button",{on:{click:function(r){e.resetForm("ruleForm")}}},[e._v("重置")])],1)],1)],1)},staticRenderFns:[]};var c=l("vSla")(n,u,!1,function(e){l("gcLm")},"data-v-2a14141a",null);r.default=c.exports},"VVt+":function(e,r,l){(e.exports=l("BkJT")(!1)).push([e.i,"\n.avatar-uploader .el-upload[data-v-2a14141a] {\n  border: 1px dashed #d9d9d9;\n  border-radius: 6px;\n  cursor: pointer;\n  position: relative;\n  overflow: hidden;\n}\n.avatar-uploader .el-upload[data-v-2a14141a]:hover {\n  border-color: #409EFF;\n}\n.avatar-uploader-icon[data-v-2a14141a] {\n  font-size: 28px;\n  color: #8c939d;\n  width: 178px;\n  height: 178px;\n  line-height: 178px;\n  text-align: center;\n}\n.avatar[data-v-2a14141a] {\n  width: 178px;\n  height: 178px;\n  display: block;\n}\n.addVisa-form[data-v-2a14141a] {\n  margin-top: 20px;\n  padding-left: 30px;\n  padding-bottom: 100px;\n}\n.addVisa-form .divide-table[data-v-2a14141a] {\n    /*margin-left: 50px;*/\n}\n.addVisa-form .tableTitle[data-v-2a14141a] {\n    background: #409EFF;\n    min-width: 150px;\n    line-height: 30px;\n    text-align: center;\n    color: #FFFFFF;\n}\n",""])},gcLm:function(e,r,l){var t=l("VVt+");"string"==typeof t&&(t=[[e.i,t,""]]),t.locals&&(e.exports=t.locals);l("8bSs")("56af8d1a",t,!0)}});