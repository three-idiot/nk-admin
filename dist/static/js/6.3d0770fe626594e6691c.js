webpackJsonp([6],{"+vt4":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("mvHQ"),s=a.n(n),o=a("qsHl"),i={data:function(){return{id:null,undercarriage:!1,shelfDialog:!1,remark:null,listLoading:!0,refundDialog:!1,chooseTravelGoodsId:[],total_count:0,RefundRule:[{hour:null,ratio:null}],type:{1:"一般",2:"推荐"},status:{1:"库存中",2:"已上架",3:"已下架",4:"审核中",5:"审核拒绝"},salePriceRule:{0:"=",1:">","-1":"<"},goodsParams:{type:null,name:null,publisher:null,status:null,publishStartTime:null,publishEndTime:null,upStartTime:null,upEndTime:null,salePrice:null,salePriceRule:null,pageIndex:1,pageSize:20},goodsList:null}},computed:{},filters:{statusFilter:function(e){return{1:"success",2:"success",3:"danger",4:"warning",5:"danger"}[e]}},created:function(){this.fetchData(this.goodsParams)},methods:{jumpAdd:function(){this.$router.push({name:"goods-add"})},refundDialogShow:function(){0!=this.chooseTravelGoodsId.length?this.refundDialog=!0:alert("当前没有选中任何商品!!!")},changeRule:function(){for(var e=[],t=0;t<this.chooseTravelGoodsId.length;t++)for(var a=this.chooseTravelGoodsId[t],n=0;n<this.RefundRule.length;n++){var i=this.RefundRule[n],l=JSON.parse(s()(i));l.travelGoodsId=a.id,l.sort=t+n,e.push(l)}console.log(e),Object(o.a)({refundRules:e}).then(function(e){console.log(e),200==e.code&&(alert("修改成功"),window.location.reload())}),this.refundDialog=!1},handleSelectionChange:function(e){this.chooseTravelGoodsId=e},cancelRefund:function(){this.RefundRule=[].push({sort:0,hour:null,ratio:null,travelGoodsId:null}),this.refundDialog=!1},addRule:function(){var e=this.RefundRule.length;this.RefundRule.push({sort:e,hour:null,ratio:null,travelGoodsId:null})},fetchData:function(e){var t=this;this.listLoading=!0,Object(o.d)(e).then(function(e){t.goodsParams.salePrice&&(t.goodsParams.salePrice=null),console.log(e.data),t.goodsList=e.data.data,t.total_count=e.data.total_count,t.listLoading=!1})},handleSizeChange:function(e){this.goodsParams.pageSize=e,this.fetchData(this.goodsParams)},handleCurrentChange:function(e){this.goodsParams.pageIndex=e,this.fetchData(this.goodsParams)},handleFilter:function(){console.log(this.goodsParams),this.goodsParams.salePrice&&(this.goodsParams.salePrice*=100),this.fetchData(this.goodsParams)},goDetail:function(e){this.$router.push({name:"goods-detail",query:{id:e}})},goEdit:function(e){this.$router.push({name:"goods-edit",query:{id:e}})},undercarriageShow:function(e){this.undercarriage=!0,this.id=e},changeStatusApi:function(e){var t={goodsId:this.id,status:e};Object(o.c)(t).then(function(e){console.log(e),200==e.code&&(alert("操作成功"),window.location.reload())})},shelfShow:function(e){this.shelfDialog=!0,this.id=e}}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("p",{staticClass:"title"},[e._v("\n        商品列表\n        "),a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["goods-list-add"],expression:"['goods-list-add']"}],staticClass:"add-agent-button",attrs:{type:"danger"},on:{click:e.jumpAdd}},[e._v("新增商品+")])],1),e._v(" "),a("hr"),e._v(" "),a("div",{staticClass:"filter-container",staticStyle:{"margin-bottom":"30px"}},[a("span",[e._v("商品类别：")]),e._v(" "),a("el-select",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{clearable:"",placeholder:"请选择"},model:{value:e.goodsParams.type,callback:function(t){e.$set(e.goodsParams,"type",t)},expression:"goodsParams.type"}},e._l(e.type,function(e,t){return a("el-option",{key:t,attrs:{label:e,value:t}})})),e._v(" "),a("span",[e._v("商品名称：")]),e._v(" "),a("el-input",{staticStyle:{width:"200px"},model:{value:e.goodsParams.name,callback:function(t){e.$set(e.goodsParams,"name",t)},expression:"goodsParams.name"}}),e._v(" "),a("span",[e._v("发布人：")]),e._v(" "),a("el-input",{staticStyle:{width:"200px"},model:{value:e.goodsParams.publisher,callback:function(t){e.$set(e.goodsParams,"publisher",t)},expression:"goodsParams.publisher"}}),e._v(" "),a("span",[e._v("商品状态：")]),e._v(" "),a("el-select",{staticClass:"filter-item",staticStyle:{width:"90px"},attrs:{clearable:"",placeholder:"请选择"},model:{value:e.goodsParams.status,callback:function(t){e.$set(e.goodsParams,"status",t)},expression:"goodsParams.status"}},e._l(e.status,function(e,t){return a("el-option",{key:t,attrs:{label:e,value:t}})})),e._v(" "),a("span",{staticClass:"demonstration"},[e._v("发布日期：")]),e._v(" "),a("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.goodsParams.publishStartTime,callback:function(t){e.$set(e.goodsParams,"publishStartTime",t)},expression:"goodsParams.publishStartTime"}}),e._v("\n        -\n        "),a("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.goodsParams.publishEndTime,callback:function(t){e.$set(e.goodsParams,"publishEndTime",t)},expression:"goodsParams.publishEndTime"}}),e._v(" "),a("div",{staticClass:"goodPrice",staticStyle:{"margin-top":"10px"}},[a("span",[e._v("商品价格：")]),e._v(" "),a("el-select",{staticClass:"filter-item",staticStyle:{width:"90px"},attrs:{clearable:"",placeholder:"请选择"},model:{value:e.goodsParams.salePriceRule,callback:function(t){e.$set(e.goodsParams,"salePriceRule",t)},expression:"goodsParams.salePriceRule"}},e._l(e.salePriceRule,function(e,t){return a("el-option",{key:t,attrs:{label:e,value:t}})})),e._v(" "),a("el-input",{staticStyle:{width:"200px"},model:{value:e.goodsParams.salePrice,callback:function(t){e.$set(e.goodsParams,"salePrice",t)},expression:"goodsParams.salePrice"}}),e._v(" "),a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["goods-list-search"],expression:"['goods-list-search']"}],staticClass:"filter-item",staticStyle:{"margin-left":"20px"},attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.handleFilter}},[e._v("查询\n            ")])],1)],1),e._v(" "),a("div",{staticClass:"list-des"},[a("span",[e._v("商品总数："),a("span",{staticStyle:{color:"orangered"}},[e._v(e._s(e.total_count))])]),e._v(" "),a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["goods-list-refundRule"],expression:"['goods-list-refundRule']"}],staticClass:"add-agent-button",attrs:{type:"danger"},on:{click:e.refundDialogShow}},[e._v("批量设置商品退款规则")])],1),e._v(" "),a("el-dialog",{attrs:{title:"退款规则设置",visible:e.refundDialog,width:"30%"},on:{"update:visible":function(t){e.refundDialog=t}}},[a("p",{staticStyle:{"font-size":"20px",color:"orangered","font-weight":"bold"}},[e._v("已选择"+e._s(e.chooseTravelGoodsId.length)+"个商品")]),e._v(" "),e._l(e.RefundRule,function(t,n){return a("div",{staticClass:"condition"},[a("p",[e._v("条件"+e._s(n+1)+"：")]),e._v(" "),a("p",[e._v("(截至时间)-(申请时间) >= "),a("el-input",{staticClass:"input1",model:{value:t.hour,callback:function(a){e.$set(t,"hour",e._n(a))},expression:"val.hour"}})],1),e._v(" "),a("p",[a("span",[e._v("退款金额")]),e._v(" = "),a("span",[e._v("支付金额")]),e._v(" x "),a("el-input",{staticClass:"input2",model:{value:t.ratio,callback:function(a){e.$set(t,"ratio",e._n(a))},expression:"val.ratio"}}),e._v("%")],1),e._v(" "),a("hr")])}),e._v(" "),a("p",{staticStyle:{"text-align":"center"}},[a("el-button",{attrs:{type:"primary"},on:{click:e.addRule}},[e._v("添加规则")])],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.cancelRefund}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.changeRule}},[e._v("确 定")])],1)],2),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%","min-height":"1000px"},attrs:{data:e.goodsList,border:"",fit:"","highlight-current-row":""},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{staticClass:"table-item",attrs:{align:"center",label:"全选",type:"selection",width:"55"},model:{value:e.chooseTravelGoodsId,callback:function(t){e.chooseTravelGoodsId=t},expression:"chooseTravelGoodsId"}}),e._v(" "),a("el-table-column",{staticClass:"table-item",attrs:{align:"center",label:"商品编号"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.goodsNo))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"商品名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.name))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"商品类别"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.type[t.row.type]))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"发布日期"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(new Date(t.row.createTime).Format("yyyy-MM-dd HH:mm:ss")))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"上架日期"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(new Date(t.row.upTime).Format("yyyy-MM-dd HH:mm:ss")))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"截止日期"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(new Date(t.row.closeDate).Format("yyyy-MM-dd HH:mm:ss")))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"发布人"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.publisher))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"门市价格"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.realPrice/100)+"元")])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"商品价格"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.salePrice/100)+"元")])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"分成比例"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"link-type"},[a("p",[e._v("省代 :"+e._s(t.row.provinceDividePrice/100)+"%")]),e._v(" "),a("p",[e._v("市县代："+e._s(t.row.cityDividePrice/100)+"%")]),e._v(" "),a("p",[e._v("网点："+e._s(t.row.pointDividePrice/100)+"%")])])]}}])}),e._v(" "),a("el-table-column",{attrs:{"class-name":"status-col",label:"商品状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:e._f("statusFilter")(t.row.status)}},[e._v("\n                    "+e._s(e.status[t.row.status])+"\n                ")])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center","class-name":"small-padding fixed-width",label:"操作",width:"340"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["goods-list-detail"],expression:"['goods-list-detail']"}],attrs:{size:"mini",type:"success",plain:""},on:{click:function(a){e.goDetail(t.row.id)}}},[e._v("\n                    查看详情\n                ")]),e._v(" "),a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["goods-list-edit"],expression:"['goods-list-edit']"}],attrs:{type:"primary",size:"mini"},on:{click:function(a){e.goEdit(t.row.id)}}},[e._v("\n                    编辑\n                ")]),e._v(" "),1==t.row.status?a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["goods-list-online"],expression:"['goods-list-online']"}],attrs:{size:"mini",type:"success"},on:{click:function(a){e.shelfShow(t.row.id)}}},[e._v("上架\n                ")]):e._e(),e._v(" "),2==t.row.status?a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["goods-list-offline"],expression:"['goods-list-offline']"}],attrs:{size:"mini",type:"danger"},on:{click:function(a){e.undercarriageShow(t.row.id)}}},[e._v("\n                    下架\n                ")]):e._e()]}}])})],1),e._v(" "),a("el-dialog",{attrs:{title:"请备注下架原因",visible:e.undercarriage,width:"30%"},on:{"update:visible":function(t){e.undercarriage=t}}},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.remark,expression:"remark"}],staticStyle:{width:"100%"},attrs:{name:"",id:"",cols:"50",rows:"10"},domProps:{value:e.remark},on:{input:function(t){t.target.composing||(e.remark=t.target.value)}}}),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.undercarriage=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.changeStatusApi(3)}}},[e._v("确 定")])],1)]),e._v(" "),a("el-dialog",{attrs:{title:"上架",visible:e.shelfDialog,width:"30%"},on:{"update:visible":function(t){e.shelfDialog=t}}},[a("span",[e._v("将此商品自己上架")]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.shelfDialog=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.changeStatusApi(2)}}},[e._v("确 定")])],1)]),e._v(" "),a("div",{staticClass:"pagination-container",staticStyle:{"margin-top":"30px"}},[a("el-pagination",{attrs:{background:"","current-page":e.goodsParams.pageIndex,"page-sizes":[4,10,20,30,50],"page-size":e.goodsParams.pageSize,layout:"sizes, prev, pager, next, jumper"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},staticRenderFns:[]};var r=a("VU/8")(i,l,!1,function(e){a("4m3+")},"data-v-d98f18ce",null);t.default=r.exports},"4m3+":function(e,t,a){var n=a("rmOm");"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);a("rjj0")("a925fbf6",n,!0)},mvHQ:function(e,t,a){e.exports={default:a("qkKv"),__esModule:!0}},qkKv:function(e,t,a){var n=a("FeBl"),s=n.JSON||(n.JSON={stringify:JSON.stringify});e.exports=function(e){return s.stringify.apply(s,arguments)}},rmOm:function(e,t,a){(e.exports=a("FZ+f")(!1)).push([e.i,"\n.app-container[data-v-d98f18ce] {\n  padding-left: 50px;\n}\n.app-container .list-des[data-v-d98f18ce] {\n    margin-top: 25px;\n    margin-bottom: 25px;\n}\n.app-container .list-des .add-agent-button[data-v-d98f18ce] {\n      font-size: 18px;\n      /*float: left;*/\n      margin-right: 40px;\n      margin-left: 20px;\n}\n.app-container .condition[data-v-d98f18ce] {\n    font-size: 20px;\n}\n.app-container .condition .input1[data-v-d98f18ce] {\n      width: 60px;\n}\n.app-container .condition .input2[data-v-d98f18ce] {\n      width: 70px;\n}\n.app-container .condition p[data-v-d98f18ce]:nth-child(1) {\n      color: #000000;\n      font-weight: bolder;\n}\n.app-container .condition p[data-v-d98f18ce]:nth-child(2) {\n      padding-left: 60px;\n}\n.app-container .condition p[data-v-d98f18ce]:nth-child(3) {\n      padding-left: 60px;\n}\n.app-container .condition p:nth-child(3) span[data-v-d98f18ce]:nth-child(1) {\n        color: #ff0000;\n}\n.app-container .condition p:nth-child(3) span[data-v-d98f18ce]:nth-child(2) {\n        color: #0000ff;\n}\n.title[data-v-d98f18ce] {\n  font-size: 30px;\n  color: #606266;\n  line-height: 40px;\n}\n.title .add-agent-button[data-v-d98f18ce] {\n    font-size: 18px;\n    float: right;\n    margin-right: 40px;\n}\n",""])}});